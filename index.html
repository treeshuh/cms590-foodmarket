<!doctype html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Coming+Soon|Permanent+Marker" rel="stylesheet">
	<link type="text/css" href="./stylesheets/main.css" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js" type="text/javascript"></script>
	<script src="javascripts/main.js" type="text/javascript"></script>
</head>
<body>
	<div id="main">
		<div class="stats">
			<p>Coins: <span data-bind="text: money"></span></p>
			<p>Time: <span data-bind="timer: countdown">120</span></p>
		</div>
		<h3 data-bind="text: title"></h3>

		<div data-bind="visible: state() == STATES().SHOPORCOOK">
			<div class="inventory">
				<h4>IN YOUR FRIDGE:</h4>
				<div data-bind="foreach: inventory">
					<div class="ingredient-div">
						<img data-bind="attr: {src: $data.image()}">
						<p class="ingredient-name" data-bind="text: $data.name()"></p>
						<p class="ingredient-expiry" data-bind="text: '(Expires in:' + $data.daysToExpiration + ')'"></p>
					</div>
				</div>
			</div>
			<button data-bind="click: function(){state(STATES().SUPERMARKET)}" class="btn-full btn-orange">Shop at the SuperMarket</button>
			<button disabled data-bind="click: function(){state(STATES().FARMERSMARKET)}" class="btn-full btn-orange">Shop at the Farmer's Market</button>
			<button data-bind="click: function(){state(STATES().DRAGDROP)}" class="btn-full btn-green">Start Cooking!</button>
		</div>

		<div data-bind="visible: state() == STATES().SUPERMARKET">
			<div class="inventory" id="supermarket-inventory">
				<h4>AVAILABLE FOR PURCHASE:</h4>
				<div data-bind="foreach: supermarketInventory">
					<div class="ingredient-div" data-bind="click: function(){$root.buyFromSupermarket($index())}">
						<img data-bind="attr: {src: $data.image()}">
						<p class="ingredient-name" data-bind="text: $data.name()"></p>
						<p class="ingredient-price" data-bind="text: $data.price + ' coins'"></p>
					</div>
				</div>
			</div>
			<button data-bind="click: function(){state(STATES().SHOPORCOOK)}" class="btn-full btn-teal">Back</button>
		</div>

		<div data-bind="visible: state() == STATES().FARMERSMARKET">
			<button data-bind="click: function(){state(STATES().SHOPORCOOK)}" class="btn-full btn-teal">Back</button>
		</div>

		<div data-bind="visible: state() == STATES().DRAGDROP">
			<button data-bind="click: function(){state(STATES().SHOPORCOOK)}" class="btn-full btn-teal">Back</button>
		</div>
	</div>
</body>
</html>